<html>
<head>
    <meta name="viewport" content="width=device-width">
    <script src='file:///android_asset/app.js'></script>
</head>
	
	
<style>
	body { background-color: #ffffff; }
    .hello 
    { 
        font-size: 42; 
        width: 100%;
        margin-top: 2em;
        text-align: center;
        color: blue;
    }
    #text{
        width:100%;
        height:30%;
    }
    #res{
        width:100%;
        height:100%;
    }
</style>
	
	
	
	<textarea id="text"></textarea>
	<br><br>
File name
<textarea id="n" >test</textarea><br>
Extencion
<textarea id="e" >txt</textarea><br>

<br>
Pin:
	<input id="pn" value=2 type="number"></input><br><br>
	<button id="co" onclick="conv()">Convertir</button><br><br>
<input type="button" id="dwn-btn" value="Download dinamically generated text file"/>
<br><br>
	
	
<textarea id="res"></textarea>
	
<script>function download(filename, text) {
    var element = document.createElement('a');
    element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
    element.setAttribute('download', filename);

    element.style.display = 'none';
    document.body.appendChild(element);

    element.click();

    document.body.removeChild(element);
}

// Start file download.
document.getElementById("dwn-btn").addEventListener("click", function(){
    // Generate download of hello.txt file with some content
    var text =res.value;
    var filename = n.value+"."+e.value;
    
    download(filename, text);
}, false);
	
	function conv(){
		convert(text.value,pn.value,function(r){
			res.value=r;
			
			
		})
		
	}
	
function convert(txt,p,callback) {
var w  = "";
  for (var i = 0; i < txt.length; i++) {
      w+= txt[i].charCodeAt(0).toString(p) + ".";
  }
  if(callback!=undefined) callback(w.slice(0,-1))
  return w.slice(0,-1);
}

function regreso(str,p,callback) {
 var ae=str.split(".").map(function(elem) {
    return String.fromCharCode(parseInt(elem, p));
  }).join("");

  if(callback!=undefined) callback(ae.trim());
       return ae
}
	
	
</script>


</html>
